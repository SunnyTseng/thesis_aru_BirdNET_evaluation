annotation_scale(location = "bl",
width_hint = 0.4) +
# north arrow:
annotation_north_arrow(style = north_arrow_fancy_orienteering,
location = "bl",
pad_x = unit(0.0, "in"), pad_y = unit(0.2, "in"),
height = unit(2, "cm"),
width = unit(2, "cm"))
main
final_map <- ggdraw() +
draw_plot(main, x = 0, y = 0) +
draw_plot(inset, x = 0.018, y = 0.6, width = 0.35, height = 0.35) +
inset_element(p = p_legend,
left = 0.05,
right = 0.25,
top = 0.4,
bottom = 0.2)
final_map
## get base map
aoi <- sites %>%
# add a buffer around the actual camera points so the the base map extends beyond them (in meters)
buffer(3000) %>%
ext()
extent <- as.vector(aoi)
register_stadiamaps("483bb38f-7ba0-4c89-b2f5-fc8310057ab4", write = FALSE)
basemap <- get_stadiamap(bbox = c(left = extent[[1]] - 0.1,
right = extent[[2]],
bottom = extent[[3]],
top = extent[[4]]),
maptype = "alidade_smooth")
main <- ggmap(basemap) +
geom_spatvector(data = grid_JPRF, inherit.aes = F, alpha = 0.1, fill = "firebrick1") +
geom_spatvector(data = grid_North, inherit.aes = F, alpha = 0.1, fill = "firebrick1") +
geom_spatvector(data = sites, inherit.aes = F) +
theme_void() +
# scale bar:
annotation_scale(location = "bl",
width_hint = 0.4) +
# north arrow:
annotation_north_arrow(style = north_arrow_fancy_orienteering,
location = "bl",
pad_x = unit(0.0, "in"), pad_y = unit(0.2, "in"),
height = unit(2, "cm"),
width = unit(2, "cm"))
final_map <- ggdraw() +
draw_plot(main, x = 0, y = 0) +
draw_plot(inset, x = 0.018, y = 0.6, width = 0.35, height = 0.35) +
inset_element(p = p_legend,
left = 0.05,
right = 0.25,
top = 0.4,
bottom = 0.2)
final_map
final_map <- ggdraw() +
draw_plot(main, x = 0, y = 0) +
draw_plot(inset, x = 0.018, y = 0.6, width = 0.35, height = 0.35) +
inset_element(p = p_legend,
left = 0,
right = 0.2,
top = 0.4,
bottom = 0.2)
final_map
final_map <- ggdraw() +
draw_plot(main, x = 0, y = 0) +
draw_plot(inset, x = 0.01, y = 0.6, width = 0.35, height = 0.35) +
inset_element(p = p_legend,
left = 0,
right = 0.2,
top = 0.4,
bottom = 0.2)
final_map
final_map <- ggdraw() +
draw_plot(main, x = 0, y = 0) +
draw_plot(inset, x = 0, y = 0.6, width = 0.35, height = 0.35) +
inset_element(p = p_legend,
left = 0,
right = 0.2,
top = 0.4,
bottom = 0.2)
final_map
final_map <- ggdraw() +
draw_plot(main, x = 0, y = 0) +
draw_plot(inset, x = 0, y = 0.6, width = 0.35, height = 0.35) +
inset_element(p = p_legend,
left = 0.01,
right = 0.2,
top = 0.4,
bottom = 0.2)
final_map
p_legend <- readPNG(here("docs", "figures", "study_site_map_legend_1.PNG"),
native = TRUE)
final_map <- ggdraw() +
draw_plot(main, x = 0, y = 0) +
draw_plot(inset, x = 0, y = 0.6, width = 0.35, height = 0.35) +
inset_element(p = p_legend,
left = 0.01,
right = 0.2,
top = 0.4,
bottom = 0.2)
final_map
p_legend <- readPNG(here("docs", "figures", "study_site_map_legend_1.PNG"),
native = TRUE)
final_map <- ggdraw() +
draw_plot(main, x = 0, y = 0) +
draw_plot(inset, x = 0, y = 0.6, width = 0.35, height = 0.35) +
inset_element(p = p_legend,
left = 0.01,
right = 0.2,
top = 0.4,
bottom = 0.2)
final_map <- ggdraw() +
draw_plot(main, x = 0, y = 0) +
draw_plot(inset, x = 0, y = 0.6, width = 0.35, height = 0.35) +
inset_element(p = p_legend,
left = 0.01,
right = 0.2,
top = 0.4,
bottom = 0.2) +
theme(rect  = element_rect(fill="transparent"))
final_map
p_legend <- readPNG(here("docs", "figures", "study_site_map_legend_1.PNG"),
native = TRUE)
final_map <- ggdraw() +
draw_plot(main, x = 0, y = 0) +
draw_plot(inset, x = 0, y = 0.6, width = 0.35, height = 0.35) +
inset_element(p = p_legend,
left = 0.01,
right = 0.2,
top = 0.4,
bottom = 0.2) +
theme(rect  = element_rect(fill="transparent"))
final_map
final_map <- ggdraw() +
draw_plot(main, x = 0, y = 0) +
draw_plot(inset, x = 0, y = 0.6, width = 0.35, height = 0.35) +
inset_element(p = p_legend,
left = 0.01,
right = 0.2,
top = 0.4,
bottom = 0.2) +
theme(rect  = element_rect(fill="transparent", color = "transparent"))
final_map
final_map <- ggdraw() +
draw_plot(main, x = 0, y = 0) +
draw_plot(inset, x = 0, y = 0.6, width = 0.35, height = 0.35) +
inset_element(p = p_legend,
left = 0.01,
right = 0.2,
top = 0.4,
bottom = 0.2) +
theme(rect  = element_rect(fill = "transparent", colour = "transparent"))
final_map
grid_North
grid_North$site
## North grid, reprojected to WGS84
grid_North <- vect(here("data", "map", "North Grid Jprf")) %>%
project(sites) %>%
drop_na(site)
rm(list = ls())
## site location, a total of 66 sites, in WGS84
sites <- read_csv(here("data", "map", "JPRF_all_sites.csv")) %>%
st_as_sf(coords = c("X", "Y"), crs = st_crs(4326)) %>%
vect()
## JPRF grid, reprojected to WGS84
grid_JPRF <- vect(here("data", "map", "JPRF Grid")) %>%
project(sites)
## North grid, reprojected to WGS84
grid_North <- vect(here("data", "map", "North Grid Jprf")) %>%
project(sites) %>%
drop_na(site)
et base map
# make inset map --------------------------------------------------------
# outline of BC
bc <- vect(bcmaps::bc_bound()) %>%
project("EPSG:4326")
# aoi as polygon
aoi <- as.polygons(aoi)
## get base map
aoi <- sites %>%
# add a buffer around the actual camera points so the the base map extends beyond them (in meters)
buffer(3000) %>%
ext()
extent <- as.vector(aoi)
register_stadiamaps("483bb38f-7ba0-4c89-b2f5-fc8310057ab4", write = FALSE)
basemap <- get_stadiamap(bbox = c(left = extent[[1]] - 0.1,
right = extent[[2]],
bottom = extent[[3]],
top = extent[[4]]),
maptype = "alidade_smooth")
main <- ggmap(basemap) +
geom_spatvector(data = grid_JPRF, inherit.aes = F, alpha = 0.1, fill = "firebrick1") +
geom_spatvector(data = grid_North, inherit.aes = F, alpha = 0.1, fill = "firebrick1") +
geom_spatvector(data = sites, inherit.aes = F) +
theme_void() +
# scale bar:
annotation_scale(location = "bl",
width_hint = 0.4) +
# north arrow:
annotation_north_arrow(style = north_arrow_fancy_orienteering,
location = "bl",
pad_x = unit(0.0, "in"), pad_y = unit(0.2, "in"),
height = unit(2, "cm"),
width = unit(2, "cm"))
# outline of BC
bc <- vect(bcmaps::bc_bound()) %>%
project("EPSG:4326")
# aoi as polygon
aoi <- as.polygons(aoi)
crs(aoi) <- "EPSG:4326"
plot(bc)
plot(as.polygons(aoi), add = T)
inset <- ggplot() +
geom_spatvector(data = bc, inherit.aes = F,
fill = "aliceblue", colour = "black") +
geom_spatvector(data = aoi, fill = "aliceblue",
colour = "red",
lwd = 1) +
theme_void()
p_legend <- readPNG(here("docs", "figures", "study_site_map_legend_1.PNG"),
native = TRUE)
final_map <- ggdraw() +
draw_plot(main, x = 0, y = 0) +
draw_plot(inset, x = 0, y = 0.6, width = 0.35, height = 0.35) +
inset_element(p = p_legend,
left = 0.01,
right = 0.2,
top = 0.4,
bottom = 0.2) +
theme(rect = element_rect(fill = "transparent", colour = "transparent"))
final_map
inset <- ggplot() +
geom_spatvector(data = bc, inherit.aes = F,
fill = "forestgreen", colour = "black", alpha = 0.4) +
geom_spatvector(data = aoi, fill = "forestgreen", alpha = 0.4,
colour = "red",
lwd = 1) +
theme_void()
inset
inset <- ggplot() +
geom_spatvector(data = bc, inherit.aes = F,
fill = "forestgreen", colour = "black", alpha = 0.2) +
geom_spatvector(data = aoi, fill = "forestgreen", alpha = 0.2,
colour = "red",
lwd = 1) +
theme_void()
inset
final_map <- ggdraw() +
draw_plot(main, x = 0, y = 0) +
draw_plot(inset, x = 0, y = 0.6, width = 0.35, height = 0.35) +
inset_element(p = p_legend,
left = 0.01,
right = 0.2,
top = 0.4,
bottom = 0.2) +
theme(rect = element_rect(fill = "transparent", colour = "transparent"))
final_map
inset <- ggplot() +
geom_spatvector(data = bc, inherit.aes = F,
fill = "forestgreen", colour = "black", alpha = 0.2) +
geom_spatvector(data = aoi, fill = "forestgreen", alpha = 0.2,
colour = "red",
lwd = 1) +
theme(rect = element_rect(fill = "transparent", colour = "transparent")) +
theme_void()
inset
final_map <- ggdraw() +
draw_plot(main, x = 0, y = 0) +
draw_plot(inset, x = 0, y = 0.6, width = 0.35, height = 0.35) +
inset_element(p = p_legend,
left = 0.01,
right = 0.2,
top = 0.4,
bottom = 0.2) +
theme(rect = element_rect(fill = "transparent", colour = "transparent"))
final_map
inset <- ggplot() +
geom_spatvector(data = bc, inherit.aes = F,
fill = "forestgreen", colour = "black", alpha = 0.2) +
geom_spatvector(data = aoi, fill = "forestgreen", alpha = 0.2,
colour = "red",
lwd = 1) +
theme(rect = element_rect(fill = "transparent", colour = "black")) +
theme_void()
p_legend <- readPNG(here("docs", "figures", "study_site_map_legend_1.PNG"),
native = TRUE)
final_map <- ggdraw() +
draw_plot(main, x = 0, y = 0) +
draw_plot(inset, x = 0, y = 0.6, width = 0.35, height = 0.35) +
inset_element(p = p_legend,
left = 0.01,
right = 0.2,
top = 0.4,
bottom = 0.2) +
theme(rect = element_rect(fill = "transparent", colour = "transparent"))
final_map
inset <- ggplot() +
geom_spatvector(data = bc, inherit.aes = F,
fill = "forestgreen", colour = "black", alpha = 0.2) +
geom_spatvector(data = aoi, fill = "forestgreen", alpha = 0.2,
colour = "red",
lwd = 1) +
theme_void() +
theme(rect = element_rect(fill = "transparent", colour = "black"))
inset
inset <- ggplot() +
geom_spatvector(data = bc, inherit.aes = F,
fill = "forestgreen", colour = "black", alpha = 0.2) +
geom_spatvector(data = aoi, fill = "forestgreen", alpha = 0.2,
colour = "red",
lwd = 1) +
theme_void() +
theme(panel.background=element_rect(colour="blue"))
inset
final_map <- ggdraw() +
draw_plot(main, x = 0, y = 0) +
draw_plot(inset, x = 0, y = 0.6, width = 0.35, height = 0.35) +
inset_element(p = p_legend,
left = 0.01,
right = 0.2,
top = 0.4,
bottom = 0.2) +
theme(rect = element_rect(fill = "transparent", colour = "transparent"))
final_map
inset <- ggplot() +
geom_spatvector(data = bc, inherit.aes = F,
fill = "forestgreen", colour = "black", alpha = 0.2) +
geom_spatvector(data = aoi, fill = "forestgreen", alpha = 0.2,
colour = "red",
lwd = 1) +
theme_void() +
theme(panel.background=element_rect(fill = "transparent", colour="blue"))
inset
p_legend <- readPNG(here("docs", "figures", "study_site_map_legend_1.PNG"),
native = TRUE)
final_map <- ggdraw() +
draw_plot(main, x = 0, y = 0) +
draw_plot(inset, x = 0, y = 0.6, width = 0.35, height = 0.35) +
inset_element(p = p_legend,
left = 0.01,
right = 0.2,
top = 0.4,
bottom = 0.2) +
theme(rect = element_rect(fill = "transparent", colour = "transparent"))
final_map
inset <- ggplot() +
geom_spatvector(data = bc, inherit.aes = F,
fill = "forestgreen", colour = "black", alpha = 0.2) +
geom_spatvector(data = aoi, fill = "forestgreen", alpha = 0.2,
colour = "red",
lwd = 1) +
theme_void() +
theme(panel.background=element_rect(fill = "transparent", colour="white"))
inset
p_legend <- readPNG(here("docs", "figures", "study_site_map_legend_1.PNG"),
native = TRUE)
final_map <- ggdraw() +
draw_plot(main, x = 0, y = 0) +
draw_plot(inset, x = 0, y = 0.6, width = 0.35, height = 0.35) +
inset_element(p = p_legend,
left = 0.01,
right = 0.2,
top = 0.4,
bottom = 0.2) +
theme(rect = element_rect(fill = "transparent", colour = "transparent"))
final_map
inset <- ggplot() +
geom_spatvector(data = bc, inherit.aes = F,
fill = "forestgreen", colour = "black", alpha = 0.2) +
geom_spatvector(data = aoi, fill = "forestgreen", alpha = 0.2,
colour = "red",
lwd = 1) +
theme_void() +
theme(panel.background=element_rect(fill = "transparent", colour="antiquewhite4"))
inset
p_legend <- readPNG(here("docs", "figures", "study_site_map_legend_1.PNG"),
native = TRUE)
final_map <- ggdraw() +
draw_plot(main, x = 0, y = 0) +
draw_plot(inset, x = 0, y = 0.6, width = 0.35, height = 0.35) +
inset_element(p = p_legend,
left = 0.01,
right = 0.2,
top = 0.4,
bottom = 0.2) +
theme(rect = element_rect(fill = "transparent", colour = "transparent"))
final_map
inset <- ggplot() +
geom_spatvector(data = bc, inherit.aes = F,
fill = "forestgreen", colour = "black", alpha = 0.2) +
geom_spatvector(data = aoi, fill = "red", alpha = 0.2,
colour = "red",
lwd = 1) +
theme_void() +
theme(panel.background=element_rect(fill = "transparent", colour="antiquewhite4"))
final_map <- ggdraw() +
draw_plot(main, x = 0, y = 0) +
draw_plot(inset, x = 0, y = 0.6, width = 0.35, height = 0.35) +
inset_element(p = p_legend,
left = 0.01,
right = 0.2,
top = 0.4,
bottom = 0.2) +
theme(rect = element_rect(fill = "transparent", colour = "transparent"))
final_map
inset <- ggplot() +
geom_spatvector(data = bc, inherit.aes = F,
fill = "forestgreen", colour = "black", alpha = 0.2) +
geom_spatvector(data = aoi, fill = "red", alpha = 0.2,
colour = "red",
lwd = 1) +
theme_void() +
theme(panel.background=element_rect(fill = "transparent", colour="antiquewhite4"))
final_map <- ggdraw() +
draw_plot(main, x = 0, y = 0) +
draw_plot(inset, x = 0, y = 0.6, width = 0.35, height = 0.35) +
inset_element(p = p_legend,
left = 0.01,
right = 0.2,
top = 0.4,
bottom = 0.2) +
theme(rect = element_rect(fill = "transparent", colour = "transparent"))
final_map
inset <- ggplot() +
geom_spatvector(data = bc, inherit.aes = F,
fill = "forestgreen", colour = "black", alpha = 0.2) +
geom_spatvector(data = aoi, fill = "red",
colour = "red",
lwd = 1) +
theme_void() +
theme(panel.background=element_rect(fill = "transparent", colour="antiquewhite4"))
final_map <- ggdraw() +
draw_plot(main, x = 0, y = 0) +
draw_plot(inset, x = 0, y = 0.6, width = 0.35, height = 0.35) +
inset_element(p = p_legend,
left = 0.01,
right = 0.2,
top = 0.4,
bottom = 0.2) +
theme(rect = element_rect(fill = "transparent", colour = "transparent"))
final_map
ggsave(final_map,
filename = here("docs", "figures", "study_site_map.png"),
width = 20,
height = 16,
units = "cm",
dpi = 300)
ggsave(final_map,
filename = here("docs", "figures", "study_site_map.png"),
width = 24,
height = 16,
units = "cm",
dpi = 300)
final_map <- ggdraw() +
draw_plot(main, x = 0, y = 0) +
draw_plot(inset, x = 0, y = 0.6, width = 0.35, height = 0.35) +
inset_element(p = p_legend,
left = 0.01,
right = 0.2,
top = 0.38,
bottom = 0.2) +
theme(rect = element_rect(fill = "transparent", colour = "transparent"))
ggsave(final_map,
filename = here("docs", "figures", "study_site_map.png"),
width = 24,
height = 16,
units = "cm",
dpi = 300)
final_map <- ggdraw() +
draw_plot(main, x = 0, y = 0) +
draw_plot(inset, x = 0, y = 0.6, width = 0.35, height = 0.35) +
inset_element(p = p_legend,
left = 0.02,
right = 0.21,
top = 0.38,
bottom = 0.2) +
theme(rect = element_rect(fill = "transparent", colour = "transparent"))
ggsave(final_map,
filename = here("docs", "figures", "study_site_map.png"),
width = 24,
height = 16,
units = "cm",
dpi = 300)
final_map <- ggdraw() +
draw_plot(main, x = 0, y = 0) +
draw_plot(inset, x = 0, y = 0.6, width = 0.35, height = 0.35) +
inset_element(p = p_legend,
left = 0.02,
right = 0.21,
top = 0.37,
bottom = 0.18) +
theme(rect = element_rect(fill = "transparent", colour = "transparent"))
ggsave(final_map,
filename = here("docs", "figures", "study_site_map.png"),
width = 24,
height = 16,
units = "cm",
dpi = 300)
final_map <- ggdraw() +
draw_plot(main, x = 0, y = 0) +
draw_plot(inset, x = 0, y = 0.63, width = 0.35, height = 0.35) +
inset_element(p = p_legend,
left = 0.02,
right = 0.21,
top = 0.37,
bottom = 0.18) +
theme(rect = element_rect(fill = "transparent", colour = "transparent"))
ggsave(final_map,
filename = here("docs", "figures", "study_site_map.png"),
width = 24,
height = 16,
units = "cm",
dpi = 300)
